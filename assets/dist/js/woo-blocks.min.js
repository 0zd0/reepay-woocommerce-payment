if(wc&&wc.wcBlocksRegistry&&React&&wc_reepay){const e=new URL(document.currentScript.src).searchParams.get("name");if(!e)throw"Script "+document.currentScript.src+" - name is undefined";const{registerPaymentMethod:t}=wc.wcBlocksRegistry,{createElement:n,useEffect:a,useState:s,Fragment:c}=React,{useSelect:o,useDispatch:i}=wp.data,{__:r}=wp.i18n,{getSetting:l}=wc.wcSettings,{PAYMENT_STORE_KEY:p}=wc.wcBlocksData,{decodeEntities:d}=wp.htmlEntities,u=l(e+"_data",{}),y=d(u.title)||r("Reepay checkout","reepay-checkout-gateway");u.tokens&&u.tokens.push({id:"new"});const m=n((()=>{const[e,t]=s(0),a=u.tokens.map((a=>n(h,{token:a,activeToken:e,setActiveToken:t})));return n("ul",{className:"reepay-blocks-list"},...a,"new"===e?n("li",null,n(k)):null)})),h=({token:t,activeToken:a,setActiveToken:s})=>{const{paymentMethodData:c}=o((e=>({paymentMethodData:e(p).getPaymentMethodData()}))),{__internalSetPaymentMethodData:l}=i(p),d=`wc-${e}-payment-token`,u=t.image?n("img",{src:t.image,image_alt:t.label}):null,y=n("input",{type:"radio",name:d,id:`${d}-${t.id}`,value:t.id,checked:a===t.id,onChange:()=>{c[d]!==t.id&&(l({...c,[d]:""+t.id}),s(t.id))}}),m=n("label",{htmlFor:`wc-${e}-payment-token-${t.id}`},u,"new"===t.id?r("Use a new payment method","reepay-checkout-gateway"):`${t.masked} ${t.expiry_month}/${t.expiry_year}`);return n("li",{key:t.id,className:"reepay-blocks-list-item"},y,m)},k=()=>{const[t,a]=s(u.always_save_token||!1),{paymentMethodData:l}=o((e=>({paymentMethodData:e(p).getPaymentMethodData()}))),{__internalSetPaymentMethodData:d}=i(p),y=`wc-${e}-new-payment-method`,m=n("input",{type:"checkbox",name:y,id:y,value:!0,checked:t,disabled:u.always_save_token||!1,onChange:u.always_save_token?void 0:e=>{if(e.target.checked)d({...l,[y]:"true"});else{const e={...l};delete e[y],d(e)}a(!t)}}),h=n("label",{htmlFor:y},r("Save to account","reepay-checkout-gateway"));return n(c,{},m,h)},g=n((e=>{const{eventRegistration:t,emitResponse:n}=e,{onPaymentProcessing:s,onCheckoutAfterProcessingWithSuccess:c,onCheckoutAfterProcessingWithError:o}=t;return a((()=>{const e=s((async e=>{console.log("onPaymentProcessing",e)})),t=c((async e=>{console.log("onCheckoutAfterProcessingWithSuccess",e);const{processingResponse:t}=e,{paymentDetails:n}=t;n.reepay_id&&n.accept_url&&wc_reepay.buildModalCheckout(n.reepay_id,n.accept_url)})),n=o((async e=>{console.log("onCheckoutAfterProcessingWithSuccess",e)}));return()=>{e(),t(),n()}}),[n.responseTypes.SUCCESS,n.responseTypes.ERROR,n.responseTypes.FAIL]),u.tokens?m:d(u.description||"")}),null),w=n((e=>{const{PaymentMethodLabel:t}=e.components;return n(t,{text:y})}),null);t({name:e,label:w,content:g,edit:g,savedTokenComponent:null,canMakePayment:()=>!0,ariaLabel:y,supports:{features:Object.values(u.supports??{})}})}