{"version":3,"sources":["woo-blocks.min.js"],"names":["wc","wcBlocksRegistry","React","wc_reepay","e","URL","document","currentScript","src","searchParams","get","registerPaymentMethod","t","createElement","n","useEffect","a","useState","o","Fragment","s","useSelect","c","useDispatch","i","wp","data","__","r","i18n","getSetting","l","wcSettings","PAYMENT_STORE_KEY","p","wcBlocksData","decodeEntities","d","htmlEntities","u","y","title","tokens","push","id","m","default_token","map","h","token","activeToken","setActiveToken","className","k","paymentMethodData","getPaymentMethodData","__internalSetPaymentMethodData","image","image_alt","label","type","name","value","checked","onChange","htmlFor","masked","expiry_month","expiry_year","key","always_save_token","disabled","target","g","eventRegistration","emitResponse","onPaymentProcessing","onCheckoutAfterProcessingWithSuccess","onCheckoutAfterProcessingWithError","async","console","log","processingResponse","paymentDetails","reepay_id","accept_url","buildModalCheckout","responseTypes","SUCCESS","ERROR","FAIL","description","w","PaymentMethodLabel","components","text","content","edit","savedTokenComponent","canMakePayment","ariaLabel","supports","features","Object","values"],"mappings":"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","file":"woo-blocks.min.min.js","sourcesContent":["if(wc&&wc.wcBlocksRegistry&&React&&wc_reepay){const e=new URL(document.currentScript.src).searchParams.get(\"name\");if(!e)throw\"Script \"+document.currentScript.src+\" - name is undefined\";const{registerPaymentMethod:t}=wc.wcBlocksRegistry,{createElement:n,useEffect:a,useState:o,Fragment:s}=React,{useSelect:c,useDispatch:i}=wp.data,{__:r}=wp.i18n,{getSetting:l}=wc.wcSettings,{PAYMENT_STORE_KEY:p}=wc.wcBlocksData,{decodeEntities:d}=wp.htmlEntities,u=l(e+\"_data\",{}),y=d(u.title)||r(\"Reepay checkout\",\"reepay-checkout-gateway\");u.tokens&&u.tokens.push({id:\"new\"});const m=n((()=>{const[e,t]=o(u.default_token),a=u.tokens.map((a=>n(h,{token:a,activeToken:e,setActiveToken:t})));return n(\"ul\",{className:\"reepay-blocks-list\"},...a,\"new\"===e?n(\"li\",null,n(k)):null)})),h=({token:t,activeToken:a,setActiveToken:o})=>{const{paymentMethodData:s}=c((e=>({paymentMethodData:e(p).getPaymentMethodData()}))),{__internalSetPaymentMethodData:l}=i(p),d=t.image?n(\"img\",{src:t.image,image_alt:t.label}):null,u=`wc-${e}-payment-token`,y=n(\"input\",{type:\"radio\",name:u,id:`${u}-${t.id}`,value:t.id,checked:a===t.id,onChange:()=>{s[u]!==t.id&&(l({...s,[u]:\"\"+t.id}),o(t.id))}}),m=n(\"label\",{htmlFor:`wc-${e}-payment-token-${t.id}`},d,\"new\"===t.id?r(\"Use a new payment method\",\"reepay-checkout-gateway\"):`${t.masked} ${t.expiry_month}/${t.expiry_year}`);return n(\"li\",{key:t.id,className:\"reepay-blocks-list-item\"},y,m)},k=()=>{const[t,a]=o(u.always_save_token||!1),{paymentMethodData:l}=c((e=>({paymentMethodData:e(p).getPaymentMethodData()}))),{__internalSetPaymentMethodData:d}=i(p),y=`wc-${e}-new-payment-method`,m=n(\"input\",{type:\"checkbox\",name:y,id:y,value:!0,checked:t,disabled:u.always_save_token||!1,onChange:u.always_save_token?void 0:e=>{if(e.target.checked)d({...l,[y]:\"true\"});else{const e={...l};delete e[y],d(e)}a(!t)}}),h=n(\"label\",{htmlFor:y},r(\"Save to account\",\"reepay-checkout-gateway\"));return n(s,{},m,h)},g=n((e=>{const{eventRegistration:t,emitResponse:n}=e,{onPaymentProcessing:o,onCheckoutAfterProcessingWithSuccess:s,onCheckoutAfterProcessingWithError:c}=t;return a((()=>{const e=o((async e=>{console.log(\"onPaymentProcessing\",e)})),t=s((async e=>{console.log(\"onCheckoutAfterProcessingWithSuccess\",e);const{processingResponse:t}=e,{paymentDetails:n}=t;n.reepay_id&&n.accept_url&&wc_reepay.buildModalCheckout(n.reepay_id,n.accept_url)})),n=c((async e=>{console.log(\"onCheckoutAfterProcessingWithSuccess\",e)}));return()=>{e(),t(),n()}}),[n.responseTypes.SUCCESS,n.responseTypes.ERROR,n.responseTypes.FAIL]),u.tokens?m:d(u.description||\"\")}),null),w=n((e=>{const{PaymentMethodLabel:t}=e.components;return n(t,{text:y})}),null);t({name:e,label:w,content:g,edit:g,savedTokenComponent:null,canMakePayment:()=>!0,ariaLabel:y,supports:{features:Object.values(u.supports??{})}})}\r\n//# sourceMappingURL=woo-blocks.min.js.map\r\n"]}