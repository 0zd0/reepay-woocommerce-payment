{"version":3,"sources":["admin.js"],"names":["jQuery","document","ready","$","on","e","preventDefault","nonce","this","data","order_id","self","ajax","url","Reepay_Admin","ajax_url","type","action","beforeSend","html","text_wait","prop","success","response","window","location","href","amount","alert","error","val","JSON","stringify","console","log","formatted_amount","confirm","settle_order","submit","inputmask","alias","groupSeparator"],"mappings":"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","file":"admin.min.js","sourcesContent":["jQuery(document).ready(function ($) {\n\t$(document).on('click', '#reepay_capture', function (e) {\n\t\te.preventDefault();\n\t\tvar nonce = $(this).data('nonce');\n\t\tvar order_id = $(this).data('order-id');\n\t\tvar self = $(this);\n\t\t\n\t\t$.ajax({\n\t\t\turl       : Reepay_Admin.ajax_url,\n\t\t\ttype      : 'POST',\n\t\t\tdata      : {\n\t\t\t\taction        : 'reepay_capture',\n\t\t\t\tnonce         : nonce,\n\t\t\t\torder_id      : order_id\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tself.data('text', self.html());\n\t\t\t\tself.html(Reepay_Admin.text_wait);\n\t\t\t\tself.prop('disabled', true);\n\t\t\t},\n\t\t\tsuccess   : function (response) {\n\t\t\t\tself.html(self.data('text'));\n\t\t\t\tself.prop('disabled', false);\n\t\t\t\tif (!response.success) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\twindow.location.href = location.href;\n\t\t\t}\n\t\t});\n\t});\n\n\t$(document).on('click', '#reepay_cancel', function (e) {\n\t\te.preventDefault();\n\t\tvar nonce = $(this).data('nonce');\n\t\tvar order_id = $(this).data('order-id');\n\t\tvar self = $(this);\n\t\t$.ajax({\n\t\t\turl       : Reepay_Admin.ajax_url,\n\t\t\ttype      : 'POST',\n\t\t\tdata      : {\n\t\t\t\taction        : 'reepay_cancel',\n\t\t\t\tnonce         : nonce,\n\t\t\t\torder_id      : order_id\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tself.data('text', self.html());\n\t\t\t\tself.html(Reepay_Admin.text_wait);\n\t\t\t\tself.prop('disabled', true);\n\t\t\t},\n\t\t\tsuccess   : function (response) {\n\t\t\t\tself.html(self.data('text'));\n\t\t\t\tself.prop('disabled', false);\n\t\t\t\t/*\n\t\t\t\tif (!response.success) {\n\t\t\t\t\talert(response.data);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\twindow.location.href = location.href;\n\t\t\t}\n\t\t});\n\t});\n\t\n\t$(document).on('click', '#reepay_refund', function (e) {\n\t\te.preventDefault();\n\t\tvar nonce = $(this).data('nonce');\n\t\tvar order_id = $(this).data('order-id');\n\t\tvar amount = $(this).data('amount');\n\t\tvar self = $(this);\n\t\t$.ajax({\n\t\t\turl       : Reepay_Admin.ajax_url,\n\t\t\ttype      : 'POST',\n\t\t\tdata      : {\n\t\t\t\taction        : 'reepay_refund',\n\t\t\t\tnonce         : nonce,\n\t\t\t\torder_id      : order_id,\n\t\t\t\tamount        : amount\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tself.data('text', self.html());\n\t\t\t\tself.html(Reepay_Admin.text_wait);\n\t\t\t\tself.prop('disabled', true);\n\t\t\t},\n\t\t\tsuccess   : function (response) {\n\t\t\t\tself.html(self.data('text'));\n\t\t\t\tself.prop('disabled', false);\n\t\t\t\tif (!response.success) {\n\t\t\t\t\talert(response.data);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\twindow.location.href = location.href;\n\t\t\t},\n\t\t\terror\t: function (response) {\n\t\t\t\talert(response);\n\t\t\t}\n\t\t});\n\t});\n\t\n\t$(document).on('click', '#reepay_capture_partly', function (e) {\n\t\te.preventDefault();\n\t\tvar nonce = $(this).data('nonce');\n\t\tvar order_id = $(this).data('order-id');\n\t\tvar amount = $(\"#reepay-capture_partly_amount-field\").val();\n\t\tvar self = $(this);\n\t\t\n\t\t$.ajax({\n\t\t\turl       : Reepay_Admin.ajax_url,\n\t\t\ttype      : 'POST',\n\t\t\tdata      : {\n\t\t\t\taction        : 'reepay_capture_partly',\n\t\t\t\tnonce         : nonce,\n\t\t\t\torder_id      : order_id,\n\t\t\t\tamount        : amount\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tself.data('text', self.html());\n\t\t\t\tself.html(Reepay_Admin.text_wait);\n\t\t\t\tself.prop('disabled', true);\n\t\t\t},\n\t\t\tsuccess   : function (response) {\n\t\t\t\tself.html(self.data('text'));\n\t\t\t\tself.prop('disabled', false);\n\t\t\t\tif (!response.success) {\n\t\t\t\t\talert(response.data);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\twindow.location.href = location.href;\n\t\t\t},\n\t\t\terror\t: function (response) {\n\t\t\t\talert(\"error response: \" + JSON.stringify(response));\n\t\t\t}\n\t\t});\n\t});\n\t\n\t$(document).on('click', '#reepay_refund_partly', function (e) {\n\t\tconsole.log('refund_partually');\n\t\te.preventDefault();\n\t\tvar nonce = $(this).data('nonce');\n\t\tvar order_id = $(this).data('order-id');\n\t\tvar amount = $(\"#reepay-refund_partly_amount-field\").val();\n\t\tvar self = $(this);\n\t\t\n\t\t$.ajax({\n\t\t\turl       : Reepay_Admin.ajax_url,\n\t\t\ttype      : 'POST',\n\t\t\tdata      : {\n\t\t\t\taction        : 'reepay_refund_partly',\n\t\t\t\tnonce         : nonce,\n\t\t\t\torder_id      : order_id,\n\t\t\t\tamount        : amount\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tself.data('text', self.html());\n\t\t\t\tself.html(Reepay_Admin.text_wait);\n\t\t\t\tself.prop('disabled', true);\n\t\t\t},\n\t\t\tsuccess   : function (response) {\n\t\t\t\tself.html(self.data('text'));\n\t\t\t\tself.prop('disabled', false);\n\t\t\t\tif (!response.success) {\n\t\t\t\t\talert(response.data);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\twindow.location.href = location.href;\n\t\t\t},\n\t\t\terror\t: function (response) {\n\t\t\t\talert(\"error response: \" + JSON.stringify(response));\n\t\t\t}\n\t\t});\n\t});\n\n\t$(document).on('click', '#woocommerce-order-actions .button', function (e) {\n\t\te.preventDefault();\n\n\t\tvar order_id = $(\"#reepay_order_id\").data('order-id');\n\t\tvar amount = $('#reepay_order_total').data('order-total');\n\t\tvar formatted_amount = $(\"#reepay_order_total\").val();\n\n\t\tif (amount > 0 && $(\"#order_status option:selected\").val()  == 'wc-completed') {\n\t\t\tif (window.confirm('Would you like to capture amount ' + formatted_amount + ' ?')) {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: Reepay_Admin.ajax_url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'reepay_set_complete_settle_transient',\n\t\t\t\t\t\tnonce: Reepay_Admin.nonce,\n\t\t\t\t\t\torder_id: order_id,\n\t\t\t\t\t\tsettle_order: 1\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function () {\n\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (response) {\n\t\t\t\t\t\t$('#post').submit();\n\t\t\t\t\t},\n\t\t\t\t\terror: function (response) {\n\t\t\t\t\t\talert(\"error response: \" + JSON.stringify(response));\n\t\t\t\t\t\t$('#post').submit();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: Reepay_Admin.ajax_url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'reepay_set_complete_settle_transient',\n\t\t\t\t\t\tnonce: Reepay_Admin.nonce,\n\t\t\t\t\t\torder_id: order_id,\n\t\t\t\t\t\tsettle_order: 0\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function () {\n\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (response) {\n\t\t\t\t\t\t$('#post').submit();\n\t\t\t\t\t},\n\t\t\t\t\terror: function (response) {\n\t\t\t\t\t\talert(\"error response: \" + JSON.stringify(response));\n\t\t\t\t\t\t$('#post').submit();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t}else {\n\t\t\t$('#post').submit();\n\t\t}\n\t});\n\n\t$( '#reepay-capture_partly_amount-field, #reepay-refund_partly_amount-field' ).inputmask({ alias: \"currency\", groupSeparator: '' });\n});"]}