{"version":3,"sources":["admin.js"],"names":["jQuery","document","ready","$","on","e","preventDefault","nonce","this","data","order_id","self","ajax","url","Reepay_Admin","ajax_url","type","action","beforeSend","html","text_wait","prop","success","response","window","location","href","amount","alert","error","val","JSON","stringify","console","log","settled","formatted_amount","confirm","settle_order","submit","inputmask","alias","groupSeparator"],"mappings":"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","file":"admin.min.js","sourcesContent":["jQuery(document).ready(function ($) {\r\n\t$(document).on('click', '#reepay_capture', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar nonce = $(this).data('nonce');\r\n\t\tvar order_id = $(this).data('order-id');\r\n\t\tvar self = $(this);\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t\turl       : Reepay_Admin.ajax_url,\r\n\t\t\ttype      : 'POST',\r\n\t\t\tdata      : {\r\n\t\t\t\taction        : 'reepay_capture',\r\n\t\t\t\tnonce         : nonce,\r\n\t\t\t\torder_id      : order_id\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tself.data('text', self.html());\r\n\t\t\t\tself.html(Reepay_Admin.text_wait);\r\n\t\t\t\tself.prop('disabled', true);\r\n\t\t\t},\r\n\t\t\tsuccess   : function (response) {\r\n\t\t\t\tself.html(self.data('text'));\r\n\t\t\t\tself.prop('disabled', false);\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.location.href = location.href;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t$(document).on('click', '#reepay_cancel', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar nonce = $(this).data('nonce');\r\n\t\tvar order_id = $(this).data('order-id');\r\n\t\tvar self = $(this);\r\n\t\t$.ajax({\r\n\t\t\turl       : Reepay_Admin.ajax_url,\r\n\t\t\ttype      : 'POST',\r\n\t\t\tdata      : {\r\n\t\t\t\taction        : 'reepay_cancel',\r\n\t\t\t\tnonce         : nonce,\r\n\t\t\t\torder_id      : order_id\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tself.data('text', self.html());\r\n\t\t\t\tself.html(Reepay_Admin.text_wait);\r\n\t\t\t\tself.prop('disabled', true);\r\n\t\t\t},\r\n\t\t\tsuccess   : function (response) {\r\n\t\t\t\tself.html(self.data('text'));\r\n\t\t\t\tself.prop('disabled', false);\r\n\t\t\t\t/*\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\talert(response.data);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\twindow.location.href = location.href;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\t$(document).on('click', '#reepay_refund', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar nonce = $(this).data('nonce');\r\n\t\tvar order_id = $(this).data('order-id');\r\n\t\tvar amount = $(this).data('amount');\r\n\t\tvar self = $(this);\r\n\t\t$.ajax({\r\n\t\t\turl       : Reepay_Admin.ajax_url,\r\n\t\t\ttype      : 'POST',\r\n\t\t\tdata      : {\r\n\t\t\t\taction        : 'reepay_refund',\r\n\t\t\t\tnonce         : nonce,\r\n\t\t\t\torder_id      : order_id,\r\n\t\t\t\tamount        : amount\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tself.data('text', self.html());\r\n\t\t\t\tself.html(Reepay_Admin.text_wait);\r\n\t\t\t\tself.prop('disabled', true);\r\n\t\t\t},\r\n\t\t\tsuccess   : function (response) {\r\n\t\t\t\tself.html(self.data('text'));\r\n\t\t\t\tself.prop('disabled', false);\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\talert(response.data);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.location.href = location.href;\r\n\t\t\t},\r\n\t\t\terror\t: function (response) {\r\n\t\t\t\talert(response);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\t$(document).on('click', '#reepay_capture_partly', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar nonce = $(this).data('nonce');\r\n\t\tvar order_id = $(this).data('order-id');\r\n\t\tvar amount = $(\"#reepay-capture_partly_amount-field\").val();\r\n\t\tvar self = $(this);\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t\turl       : Reepay_Admin.ajax_url,\r\n\t\t\ttype      : 'POST',\r\n\t\t\tdata      : {\r\n\t\t\t\taction        : 'reepay_capture_partly',\r\n\t\t\t\tnonce         : nonce,\r\n\t\t\t\torder_id      : order_id,\r\n\t\t\t\tamount        : amount\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tself.data('text', self.html());\r\n\t\t\t\tself.html(Reepay_Admin.text_wait);\r\n\t\t\t\tself.prop('disabled', true);\r\n\t\t\t},\r\n\t\t\tsuccess   : function (response) {\r\n\t\t\t\tself.html(self.data('text'));\r\n\t\t\t\tself.prop('disabled', false);\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\talert(response.data);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\twindow.location.href = location.href;\r\n\t\t\t},\r\n\t\t\terror\t: function (response) {\r\n\t\t\t\talert(\"error response: \" + JSON.stringify(response));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\t$(document).on('click', '#reepay_refund_partly', function (e) {\r\n\t\tconsole.log('refund_partually');\r\n\t\te.preventDefault();\r\n\t\tvar nonce = $(this).data('nonce');\r\n\t\tvar order_id = $(this).data('order-id');\r\n\t\tvar amount = $(\"#reepay-refund_partly_amount-field\").val();\r\n\t\tvar self = $(this);\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t\turl       : Reepay_Admin.ajax_url,\r\n\t\t\ttype      : 'POST',\r\n\t\t\tdata      : {\r\n\t\t\t\taction        : 'reepay_refund_partly',\r\n\t\t\t\tnonce         : nonce,\r\n\t\t\t\torder_id      : order_id,\r\n\t\t\t\tamount        : amount\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tself.data('text', self.html());\r\n\t\t\t\tself.html(Reepay_Admin.text_wait);\r\n\t\t\t\tself.prop('disabled', true);\r\n\t\t\t},\r\n\t\t\tsuccess   : function (response) {\r\n\t\t\t\tself.html(self.data('text'));\r\n\t\t\t\tself.prop('disabled', false);\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\talert(response.data);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\twindow.location.href = location.href;\r\n\t\t\t},\r\n\t\t\terror\t: function (response) {\r\n\t\t\t\talert(\"error response: \" + JSON.stringify(response));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t$(document).on('click', '#woocommerce-order-actions .button', function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tvar order_id = $(\"#reepay_order_id\").data('order-id');\r\n\t\tvar amount = $('#reepay_order_total').data('order-total');\r\n\t\tvar settled = $('#reepay_order_total_settled').val();\r\n\t\tvar formatted_amount = $(\"#reepay_order_total\").val();\r\n\r\n\t\tif (amount > 0 && settled < amount && $(\"#order_status option:selected\").val()  == 'wc-completed') {\r\n\t\t\tif (window.confirm('Would you like to capture amount ' + formatted_amount + ' ?')) {\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: Reepay_Admin.ajax_url,\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'reepay_set_complete_settle_transient',\r\n\t\t\t\t\t\tnonce: Reepay_Admin.nonce,\r\n\t\t\t\t\t\torder_id: order_id,\r\n\t\t\t\t\t\tsettle_order: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeSend: function () {\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (response) {\r\n\t\t\t\t\t\t$('#post').submit();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function (response) {\r\n\t\t\t\t\t\talert(\"error response: \" + JSON.stringify(response));\r\n\t\t\t\t\t\t$('#post').submit();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: Reepay_Admin.ajax_url,\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'reepay_set_complete_settle_transient',\r\n\t\t\t\t\t\tnonce: Reepay_Admin.nonce,\r\n\t\t\t\t\t\torder_id: order_id,\r\n\t\t\t\t\t\tsettle_order: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeSend: function () {\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (response) {\r\n\t\t\t\t\t\t$('#post').submit();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function (response) {\r\n\t\t\t\t\t\talert(\"error response: \" + JSON.stringify(response));\r\n\t\t\t\t\t\t$('#post').submit();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}else {\r\n\t\t\t$('#post').submit();\r\n\t\t}\r\n\t});\r\n\r\n\t$( '#reepay-capture_partly_amount-field, #reepay-refund_partly_amount-field' ).inputmask({ alias: \"currency\", groupSeparator: '' });\r\n});"]}