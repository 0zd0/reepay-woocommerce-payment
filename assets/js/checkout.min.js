jQuery(function(e){"use strict";if("undefined"==typeof wc_checkout_params)return!1;var n=new Reepay.ModalCheckout;function o(e,n,o){var a=e.split("?")[0],r="?"+e.split("?")[1],t=n+"="+o,c="?"+t;if(r){var l=new RegExp("([?&])"+n+"[^&]*"),p=new RegExp("([?&])"+n+"=[^&;]+[&;]?");c=null==o||""===o?(c=r.replace(p,"$1")).replace(/[&;]$/,""):null!==r.match(l)?r.replace(l,"$1"+t):r+"&"+t}return a+(c="?"===c?"":c)}e(document).ajaxComplete(function(a,r,t){if(t.url===wc_checkout_params.checkout_url){var c=r.responseText;try{var l=e.parseJSON(c)}catch(e){return!1}if(!l.hasOwnProperty("is_reepay_checkout"))return!1;var p=l.accept_url,u=l.cancel_url;console.log(l),"OVERLAY"===WC_Gateway_Reepay_Checkout.payment_type?n.show(l.reepay.id):n=new Reepay.WindowCheckout(l.reepay.id),n.addEventHandler(Reepay.Event.Accept,function(e){console.log("Accept",e);var n=p;for(let a in e)n=o(n,a,e[a]);window.location.href=n}),n.addEventHandler(Reepay.Event.Cancel,function(e){console.log("Cancel",e),window.location.href=u}),n.addEventHandler(Reepay.Event.Close,function(e){console.log("Close",e)}),n.addEventHandler(Reepay.Event.Error,function(e){console.log("Error",e),window.location.href=u})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrb3V0LmpzIl0sIm5hbWVzIjpbImpRdWVyeSIsIiQiLCJ3Y19jaGVja291dF9wYXJhbXMiLCJycCIsIlJlZXBheSIsIk1vZGFsQ2hlY2tvdXQiLCJzZXRVcmxQYXJhbWV0ZXIiLCJ1cmwiLCJrZXkiLCJ2YWx1ZSIsImJhc2VVcmwiLCJzcGxpdCIsInVybFF1ZXJ5U3RyaW5nIiwibmV3UGFyYW0iLCJwYXJhbXMiLCJ1cGRhdGVSZWdleCIsIlJlZ0V4cCIsInJlbW92ZVJlZ2V4IiwicmVwbGFjZSIsIm1hdGNoIiwiZG9jdW1lbnQiLCJhamF4Q29tcGxldGUiLCJldmVudCIsInhociIsInNldHRpbmdzIiwiY2hlY2tvdXRfdXJsIiwiZGF0YSIsInJlc3BvbnNlVGV4dCIsInJlc3VsdCIsInBhcnNlSlNPTiIsImUiLCJoYXNPd25Qcm9wZXJ0eSIsImFjY2VwdF91cmwiLCJjYW5jZWxfdXJsIiwiY29uc29sZSIsImxvZyIsIldDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0IiwicGF5bWVudF90eXBlIiwic2hvdyIsInJlZXBheSIsImlkIiwiV2luZG93Q2hlY2tvdXQiLCJhZGRFdmVudEhhbmRsZXIiLCJFdmVudCIsIkFjY2VwdCIsInJlZGlyZWN0X3VybCIsInByb3AiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJDYW5jZWwiLCJDbG9zZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBUSxTQUFVQyxHQUNkLGFBR0EsR0FBbUMsb0JBQXZCQyxtQkFDUixPQUFPLEVBSVgsSUFBSUMsRUFBSyxJQUFJQyxPQUFPQyxjQTJEcEIsU0FBU0MsRUFBZ0JDLEVBQUtDLEVBQUtDLEdBQy9CLElBQUlDLEVBQVVILEVBQUlJLE1BQU0sS0FBSyxHQUN6QkMsRUFBaUIsSUFBTUwsRUFBSUksTUFBTSxLQUFLLEdBQ3RDRSxFQUFXTCxFQUFNLElBQU1DLEVBQ3ZCSyxFQUFTLElBQU1ELEVBR25CLEdBQUlELEVBQWdCLENBQ2hCLElBQUlHLEVBQWMsSUFBSUMsT0FBTyxTQUFZUixFQUFNLFNBQzNDUyxFQUFjLElBQUlELE9BQU8sU0FBWVIsRUFBTSxnQkFJM0NNLEVBRkEsTUFBT0wsR0FBcUQsS0FBVkEsR0FDbERLLEVBQVNGLEVBQWVNLFFBQVFELEVBQWEsT0FDN0JDLFFBQVEsUUFBUyxJQUVZLE9BQXRDTixFQUFlTyxNQUFNSixHQUNuQkgsRUFBZU0sUUFBUUgsRUFBYSxLQUFPRixHQUczQ0QsRUFBaUIsSUFBTUMsRUFPeEMsT0FBT0gsR0FGUEksRUFBb0IsTUFBWEEsRUFBaUIsR0FBS0EsR0FqRm5DYixFQUFFbUIsVUFBVUMsYUFBYyxTQUFXQyxFQUFPQyxFQUFLQyxHQUM3QyxHQUFLQSxFQUFTakIsTUFBUUwsbUJBQW1CdUIsYUFBZSxDQUNwRCxJQUFJQyxFQUFPSCxFQUFJSSxhQUdmLElBQ0ksSUFBSUMsRUFBUzNCLEVBQUU0QixVQUFXSCxHQUM1QixNQUFRSSxHQUNOLE9BQU8sRUFJWCxJQUFPRixFQUFPRyxlQUFnQixzQkFDMUIsT0FBTyxFQUdYLElBQUlDLEVBQWFKLEVBQU9JLFdBQ3BCQyxFQUFhTCxFQUFPSyxXQUd4QkMsUUFBUUMsSUFBSVAsR0FFb0MsWUFBNUNRLDJCQUEyQkMsYUFFM0JsQyxFQUFHbUMsS0FBS1YsRUFBT1csT0FBT0MsSUFHdEJyQyxFQUFLLElBQUlDLE9BQU9xQyxlQUFlYixFQUFPVyxPQUFPQyxJQUdqRHJDLEVBQUd1QyxnQkFBZ0J0QyxPQUFPdUMsTUFBTUMsT0FBUSxTQUFTbEIsR0FDN0NRLFFBQVFDLElBQUksU0FBVVQsR0FFdEIsSUFBSW1CLEVBQWViLEVBQ25CLElBQUssSUFBSWMsS0FBUXBCLEVBQ2JtQixFQUFldkMsRUFBZ0J1QyxFQUFjQyxFQUFNcEIsRUFBS29CLElBRzVEQyxPQUFPQyxTQUFTQyxLQUFPSixJQUczQjFDLEVBQUd1QyxnQkFBZ0J0QyxPQUFPdUMsTUFBTU8sT0FBUSxTQUFTeEIsR0FDN0NRLFFBQVFDLElBQUksU0FBVVQsR0FDdEJxQixPQUFPQyxTQUFTQyxLQUFPaEIsSUFHM0I5QixFQUFHdUMsZ0JBQWdCdEMsT0FBT3VDLE1BQU1RLE1BQU8sU0FBU3pCLEdBQzVDUSxRQUFRQyxJQUFJLFFBQVNULEtBR3pCdkIsRUFBR3VDLGdCQUFnQnRDLE9BQU91QyxNQUFNUyxNQUFPLFNBQVMxQixHQUM1Q1EsUUFBUUMsSUFBSSxRQUFTVCxHQUNyQnFCLE9BQU9DLFNBQVNDLEtBQU9oQiIsImZpbGUiOiJjaGVja291dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgd2NfY2hlY2tvdXRfcGFyYW1zICovXG5qUXVlcnkoIGZ1bmN0aW9uKCAkICkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHdjX2NoZWNrb3V0X3BhcmFtcyBpcyByZXF1aXJlZCB0byBjb250aW51ZSwgZW5zdXJlIHRoZSBvYmplY3QgZXhpc3RzXG4gICAgaWYgKCB0eXBlb2Ygd2NfY2hlY2tvdXRfcGFyYW1zID09PSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFByZWxvYWQgTW9kYWxDaGVja291dFxuICAgIHZhciBycCA9IG5ldyBSZWVwYXkuTW9kYWxDaGVja291dCgpO1xuXG4gICAgJChkb2N1bWVudCkuYWpheENvbXBsZXRlKCBmdW5jdGlvbiAoIGV2ZW50LCB4aHIsIHNldHRpbmdzICkge1xuICAgICAgICBpZiAoIHNldHRpbmdzLnVybCA9PT0gd2NfY2hlY2tvdXRfcGFyYW1zLmNoZWNrb3V0X3VybCApIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0geGhyLnJlc3BvbnNlVGV4dDtcblxuICAgICAgICAgICAgLy8gUGFyc2VcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICQucGFyc2VKU09OKCBkYXRhICk7XG4gICAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlzIHJlc3BvbnNlIGZyb20gcGF5bWVudCBnYXRld2F5XG4gICAgICAgICAgICBpZiAoICEgcmVzdWx0Lmhhc093blByb3BlcnR5KCAnaXNfcmVlcGF5X2NoZWNrb3V0JyApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFjY2VwdF91cmwgPSByZXN1bHQuYWNjZXB0X3VybCxcbiAgICAgICAgICAgICAgICBjYW5jZWxfdXJsID0gcmVzdWx0LmNhbmNlbF91cmw7XG5cblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICAgICAgaWYgKFdDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0LnBheW1lbnRfdHlwZSA9PT0gJ09WRVJMQVknKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyBtb2RhbFxuICAgICAgICAgICAgICAgIHJwLnNob3cocmVzdWx0LnJlZXBheS5pZCk7XG4gICAgICAgICAgICAgICAgLy9ycCA9IG5ldyBSZWVwYXkuTW9kYWxDaGVja291dChyZXN1bHQucmVlcGF5LmlkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcnAgPSBuZXcgUmVlcGF5LldpbmRvd0NoZWNrb3V0KHJlc3VsdC5yZWVwYXkuaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBycC5hZGRFdmVudEhhbmRsZXIoUmVlcGF5LkV2ZW50LkFjY2VwdCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBY2NlcHQnLCBkYXRhKTtcblxuICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmwgPSBhY2NlcHRfdXJsO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdF91cmwgPSBzZXRVcmxQYXJhbWV0ZXIocmVkaXJlY3RfdXJsLCBwcm9wLCBkYXRhW3Byb3BdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0X3VybDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBycC5hZGRFdmVudEhhbmRsZXIoUmVlcGF5LkV2ZW50LkNhbmNlbCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYW5jZWwnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNhbmNlbF91cmw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcnAuYWRkRXZlbnRIYW5kbGVyKFJlZXBheS5FdmVudC5DbG9zZSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDbG9zZScsIGRhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJwLmFkZEV2ZW50SGFuZGxlcihSZWVwYXkuRXZlbnQuRXJyb3IsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3InLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNhbmNlbF91cmw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gKTtcblxuICAgIGZ1bmN0aW9uIHNldFVybFBhcmFtZXRlcih1cmwsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGJhc2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXSxcbiAgICAgICAgICAgIHVybFF1ZXJ5U3RyaW5nID0gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0sXG4gICAgICAgICAgICBuZXdQYXJhbSA9IGtleSArICc9JyArIHZhbHVlLFxuICAgICAgICAgICAgcGFyYW1zID0gJz8nICsgbmV3UGFyYW07XG5cbiAgICAgICAgLy8gSWYgdGhlIFwic2VhcmNoXCIgc3RyaW5nIGV4aXN0cywgdGhlbiBidWlsZCBwYXJhbXMgZnJvbSBpdFxuICAgICAgICBpZiAodXJsUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoJyhbXFw/Jl0pJyArIGtleSArICdbXiZdKicpO1xuICAgICAgICAgICAgdmFyIHJlbW92ZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFtcXD8mXSknICsga2V5ICsgJz1bXiY7XStbJjtdPycpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHsgLy8gUmVtb3ZlIHBhcmFtIGlmIHZhbHVlIGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gdXJsUXVlcnlTdHJpbmcucmVwbGFjZShyZW1vdmVSZWdleCwgXCIkMVwiKTtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBwYXJhbXMucmVwbGFjZSgvWyY7XSQvLCBcIlwiKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh1cmxRdWVyeVN0cmluZy5tYXRjaCh1cGRhdGVSZWdleCkgIT09IG51bGwpIHsgLy8gSWYgcGFyYW0gZXhpc3RzIGFscmVhZHksIHVwZGF0ZSBpdFxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nLnJlcGxhY2UodXBkYXRlUmVnZXgsIFwiJDFcIiArIG5ld1BhcmFtKTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gT3RoZXJ3aXNlLCBhZGQgaXQgdG8gZW5kIG9mIHF1ZXJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nICsgJyYnICsgbmV3UGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBwYXJhbWV0ZXIgd2FzIHNldCBzbyB3ZSBkb24ndCBuZWVkIHRoZSBxdWVzdGlvbiBtYXJrXG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyA9PT0gJz8nID8gJycgOiBwYXJhbXM7XG5cbiAgICAgICAgcmV0dXJuIGJhc2VVcmwgKyBwYXJhbXM7XG4gICAgfVxufSk7XG5cbiJdfQ==
