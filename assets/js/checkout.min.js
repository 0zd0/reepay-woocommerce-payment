window.rp=new Reepay.ModalCheckout,jQuery(function(e){"use strict";if("undefined"==typeof wc_checkout_params)return!1;e(document).ajaxComplete(function(o,r,t){if(t.url===wc_checkout_params.checkout_url||t.url.indexOf("wc-ajax=complete_order")>-1){const o=r.responseText;try{const r=e.parseJSON(o);if(!r.hasOwnProperty("is_reepay_checkout"))return!1;wc_reepay.buildModalCheckout(r.reepay.id,r.accept_url)}catch(e){return!1}}}),e(document).ready(function(){if(window.location.hash.indexOf("#!reepay-pay")>-1){const e=document.location.hash.replace("#!reepay-pay",""),o=new URLSearchParams(e);let r=o.get("rid"),t=o.get("accept_url");window.setTimeout(function(){wc_reepay.buildModalCheckout(r,t),history.pushState("",document.title,window.location.pathname)},1e3)}})}),wc_reepay={buildModalCheckout:function(e,o){"OVERLAY"===WC_Gateway_Reepay_Checkout.payment_type?window.rp.show(e):window.rp=new Reepay.WindowCheckout(e),window.rp.addEventHandler(Reepay.Event.Accept,function(e){console.log("Accept",e);let r=o;for(let o in e)r=wc_reepay.setUrlParameter(r,o,e[o]);window.location.href=r}),window.rp.addEventHandler(Reepay.Event.Cancel,function(e){console.log("Cancel",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.cancel_text)}),window.rp.addEventHandler(Reepay.Event.Close,function(e){$("form.checkout").removeClass("processing").unblock(),console.log("Close",e)}),window.rp.addEventHandler(Reepay.Event.Error,function(e){console.log("Error",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.error_text)})},throw_error:function(e){jQuery(function(o){var r=o("form.checkout");r.removeClass("processing").unblock(),o(".woocommerce-NoticeGroup").remove();var t='<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"><ul class="woocommerce-error" role="alert"><li>'+e+"</li></ul></div>";r.before(t);var c=o(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");c.length||(c=o(".form.checkout")),c.length&&o("html, body").animate({scrollTop:c.offset().top-100},1e3)})},setUrlParameter:function(e,o,r){var t=e.split("?")[0],c="?"+e.split("?")[1],n=o+"="+r,a="?"+n;if(c){var l=new RegExp("([?&])"+o+"[^&]*"),u=new RegExp("([?&])"+o+"=[^&;]+[&;]?");a=null==r||""===r?(a=c.replace(u,"$1")).replace(/[&;]$/,""):null!==c.match(l)?c.replace(l,"$1"+n):c+"&"+n}return t+(a="?"===a?"":a)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrb3V0LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsInJwIiwiUmVlcGF5IiwiTW9kYWxDaGVja291dCIsImpRdWVyeSIsIiQiLCJ3Y19jaGVja291dF9wYXJhbXMiLCJkb2N1bWVudCIsImFqYXhDb21wbGV0ZSIsImV2ZW50IiwieGhyIiwic2V0dGluZ3MiLCJ1cmwiLCJjaGVja291dF91cmwiLCJpbmRleE9mIiwiZGF0YSIsInJlc3BvbnNlVGV4dCIsInJlc3VsdCIsInBhcnNlSlNPTiIsImhhc093blByb3BlcnR5Iiwid2NfcmVlcGF5IiwiYnVpbGRNb2RhbENoZWNrb3V0IiwicmVlcGF5IiwiaWQiLCJhY2NlcHRfdXJsIiwiZSIsInJlYWR5IiwibG9jYXRpb24iLCJoYXNoIiwicmVwbGFjZSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInJpZCIsImdldCIsInNldFRpbWVvdXQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwidGl0bGUiLCJwYXRobmFtZSIsInJlZXBheV9pZCIsIldDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0IiwicGF5bWVudF90eXBlIiwic2hvdyIsIldpbmRvd0NoZWNrb3V0IiwiYWRkRXZlbnRIYW5kbGVyIiwiRXZlbnQiLCJBY2NlcHQiLCJjb25zb2xlIiwibG9nIiwicmVkaXJlY3RfdXJsIiwicHJvcCIsInNldFVybFBhcmFtZXRlciIsImhyZWYiLCJDYW5jZWwiLCJ0aHJvd19lcnJvciIsImNhbmNlbF90ZXh0IiwiQ2xvc2UiLCJyZW1vdmVDbGFzcyIsInVuYmxvY2siLCJFcnJvciIsImVycm9yX3RleHQiLCJlcnJvclRocm93biIsImZvcm0iLCJyZW1vdmUiLCJtZXNzYWdlIiwiYmVmb3JlIiwic2Nyb2xsRWxlbWVudCIsImxlbmd0aCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJrZXkiLCJ2YWx1ZSIsImJhc2VVcmwiLCJzcGxpdCIsInVybFF1ZXJ5U3RyaW5nIiwibmV3UGFyYW0iLCJ1cGRhdGVSZWdleCIsIlJlZ0V4cCIsInJlbW92ZVJlZ2V4IiwibWF0Y2giXSwibWFwcGluZ3MiOiJBQUlBQSxPQUFPQyxHQUFLLElBQUlDLE9BQU9DLGNBRXZCQyxPQUFRLFNBQVVDLEdBQ2QsYUFHQSxHQUFtQyxvQkFBdkJDLG1CQUNSLE9BQU8sRUFHWEQsRUFBR0UsVUFBV0MsYUFBYyxTQUFXQyxFQUFPQyxFQUFLQyxHQUMvQyxHQUFPQSxFQUFTQyxNQUFRTixtQkFBbUJPLGNBQW9CRixFQUFTQyxJQUFJRSxRQUFTLDJCQUE4QixFQUFNLENBQ3JILE1BQU1DLEVBQU9MLEVBQUlNLGFBR2pCLElBQ0ksTUFBTUMsRUFBU1osRUFBRWEsVUFBV0gsR0FHNUIsSUFBT0UsRUFBT0UsZUFBZ0Isc0JBQzFCLE9BQU8sRUFHWEMsVUFBVUMsbUJBQW9CSixFQUFPSyxPQUFPQyxHQUFJTixFQUFPTyxZQUN6RCxNQUFRQyxHQUNOLE9BQU8sTUFLbkJwQixFQUFHRSxVQUFXbUIsTUFBTSxXQUNoQixHQUFLMUIsT0FBTzJCLFNBQVNDLEtBQUtkLFFBQVMsaUJBQW9CLEVBQUksQ0FDdkQsTUFBTUYsRUFBTUwsU0FBU29CLFNBQVNDLEtBQUtDLFFBQVMsZUFBZSxJQUN2REMsRUFBUyxJQUFJQyxnQkFBaUJuQixHQUVsQyxJQUFJb0IsRUFBTUYsRUFBT0csSUFBSyxPQUNsQlQsRUFBYU0sRUFBT0csSUFBSyxjQUU3QmpDLE9BQU9rQyxXQUFZLFdBQ2ZkLFVBQVVDLG1CQUFvQlcsRUFBS1IsR0FDbkNXLFFBQVFDLFVBQVcsR0FBSTdCLFNBQVM4QixNQUFPckMsT0FBTzJCLFNBQVNXLFdBQ3hELFVBS2ZsQixVQUFZLENBT1JDLG1CQUFvQixTQUFXa0IsRUFBV2YsR0FDVyxZQUE1Q2dCLDJCQUEyQkMsYUFFNUJ6QyxPQUFPQyxHQUFHeUMsS0FBTUgsR0FHaEJ2QyxPQUFPQyxHQUFLLElBQUlDLE9BQU95QyxlQUFnQkosR0FHM0N2QyxPQUFPQyxHQUFHMkMsZ0JBQWlCMUMsT0FBTzJDLE1BQU1DLE9BQVEsU0FBVS9CLEdBQ3REZ0MsUUFBUUMsSUFBSyxTQUFVakMsR0FFdkIsSUFBSWtDLEVBQWV6QixFQUNuQixJQUFNLElBQUkwQixLQUFRbkMsRUFDZGtDLEVBQWU3QixVQUFVK0IsZ0JBQWlCRixFQUFjQyxFQUFNbkMsRUFBS21DLElBR3ZFbEQsT0FBTzJCLFNBQVN5QixLQUFPSCxJQUczQmpELE9BQU9DLEdBQUcyQyxnQkFBaUIxQyxPQUFPMkMsTUFBTVEsT0FBUSxTQUFVdEMsR0FDdERnQyxRQUFRQyxJQUFLLFNBQVVqQyxHQUN2QkssVUFBVWtDLFlBQWFkLDJCQUEyQmUsZUFHdER2RCxPQUFPQyxHQUFHMkMsZ0JBQWlCMUMsT0FBTzJDLE1BQU1XLE1BQU8sU0FBVXpDLEdBQzFDVixFQUFFLGlCQUNSb0QsWUFBYSxjQUFlQyxVQUNqQ1gsUUFBUUMsSUFBSyxRQUFTakMsS0FHMUJmLE9BQU9DLEdBQUcyQyxnQkFBaUIxQyxPQUFPMkMsTUFBTWMsTUFBTyxTQUFVNUMsR0FDckRnQyxRQUFRQyxJQUFLLFFBQVNqQyxHQUN0QkssVUFBVWtDLFlBQWFkLDJCQUEyQm9CLGVBSTFETixZQUFhLFNBQVdPLEdBQ3BCekQsT0FBUSxTQUFVQyxHQUNkLElBQUl5RCxFQUFPekQsRUFBRSxpQkFDYnlELEVBQUtMLFlBQWEsY0FBZUMsVUFDakNyRCxFQUFFLDRCQUE0QjBELFNBQzlCLElBQUlDLEVBQVUsd0hBQTBISCxFQUFjLG1CQUN0SkMsRUFBS0csT0FBT0QsR0FDWixJQUFJRSxFQUFnQjdELEVBQUUsaUZBQ2pCNkQsRUFBY0MsU0FDZkQsRUFBZ0I3RCxFQUFFLG1CQUVsQjZELEVBQWNDLFFBQ2Q5RCxFQUFFLGNBQWMrRCxRQUFRLENBQ3BCQyxVQUFZSCxFQUFjSSxTQUFTQyxJQUFNLEtBQzFDLFFBY2ZwQixnQkFBaUIsU0FBV3ZDLEVBQUs0RCxFQUFLQyxHQUNsQyxJQUFJQyxFQUFVOUQsRUFBSStELE1BQU0sS0FBSyxHQUN6QkMsRUFBaUIsSUFBTWhFLEVBQUkrRCxNQUFNLEtBQUssR0FDdENFLEVBQVdMLEVBQU0sSUFBTUMsRUFDdkIzQyxFQUFTLElBQU0rQyxFQUduQixHQUFJRCxFQUFnQixDQUNoQixJQUFJRSxFQUFjLElBQUlDLE9BQU8sU0FBWVAsRUFBTSxTQUMzQ1EsRUFBYyxJQUFJRCxPQUFPLFNBQVlQLEVBQU0sZ0JBSTNDMUMsRUFGQSxNQUFPMkMsR0FBcUQsS0FBVkEsR0FDbEQzQyxFQUFTOEMsRUFBZS9DLFFBQVFtRCxFQUFhLE9BQzdCbkQsUUFBUSxRQUFTLElBRVksT0FBdEMrQyxFQUFlSyxNQUFNSCxHQUNuQkYsRUFBZS9DLFFBQVFpRCxFQUFhLEtBQU9ELEdBRzNDRCxFQUFpQixJQUFNQyxFQU94QyxPQUFPSCxHQUZQNUMsRUFBb0IsTUFBWEEsRUFBaUIsR0FBS0EiLCJmaWxlIjoiY2hlY2tvdXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHdjX2NoZWNrb3V0X3BhcmFtcyAqL1xyXG4vKiBnbG9iYWwgUmVlcGF5ICovXHJcblxyXG4vLyBQcmVsb2FkIE1vZGFsQ2hlY2tvdXRcclxud2luZG93LnJwID0gbmV3IFJlZXBheS5Nb2RhbENoZWNrb3V0KCk7XHJcblxyXG5qUXVlcnkoIGZ1bmN0aW9uKCAkICkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIHdjX2NoZWNrb3V0X3BhcmFtcyBpcyByZXF1aXJlZCB0byBjb250aW51ZSwgZW5zdXJlIHRoZSBvYmplY3QgZXhpc3RzXHJcbiAgICBpZiAoIHR5cGVvZiB3Y19jaGVja291dF9wYXJhbXMgPT09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAkKCBkb2N1bWVudCApLmFqYXhDb21wbGV0ZSggZnVuY3Rpb24gKCBldmVudCwgeGhyLCBzZXR0aW5ncyApIHtcclxuICAgICAgICBpZiAoICggc2V0dGluZ3MudXJsID09PSB3Y19jaGVja291dF9wYXJhbXMuY2hlY2tvdXRfdXJsICkgfHwgKCBzZXR0aW5ncy51cmwuaW5kZXhPZiggJ3djLWFqYXg9Y29tcGxldGVfb3JkZXInICkgPiAtMSApICkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0geGhyLnJlc3BvbnNlVGV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAkLnBhcnNlSlNPTiggZGF0YSApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlzIHJlc3BvbnNlIGZyb20gcGF5bWVudCBnYXRld2F5XHJcbiAgICAgICAgICAgICAgICBpZiAoICEgcmVzdWx0Lmhhc093blByb3BlcnR5KCAnaXNfcmVlcGF5X2NoZWNrb3V0JyApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB3Y19yZWVwYXkuYnVpbGRNb2RhbENoZWNrb3V0KCByZXN1bHQucmVlcGF5LmlkLCByZXN1bHQuYWNjZXB0X3VybCApO1xyXG4gICAgICAgICAgICB9IGNhdGNoICggZSApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICAkKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluZGV4T2YoICcjIXJlZXBheS1wYXknICkgPiAtMSApIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKCAnIyFyZWVwYXktcGF5JywnJyApLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyggdXJsICk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmlkID0gcGFyYW1zLmdldCggJ3JpZCcgKSxcclxuICAgICAgICAgICAgICAgIGFjY2VwdF91cmwgPSBwYXJhbXMuZ2V0KCAnYWNjZXB0X3VybCcgKTtcclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3Y19yZWVwYXkuYnVpbGRNb2RhbENoZWNrb3V0KCByaWQsIGFjY2VwdF91cmwgKTtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKCAnJywgZG9jdW1lbnQudGl0bGUsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSApO1xyXG4gICAgICAgICAgICB9LCAxMDAwICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxud2NfcmVlcGF5ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBNb2RhbCBDaGVja291dFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZWVwYXlfaWRcclxuICAgICAqIEBwYXJhbSBhY2NlcHRfdXJsXHJcbiAgICAgKi9cclxuICAgIGJ1aWxkTW9kYWxDaGVja291dDogZnVuY3Rpb24gKCByZWVwYXlfaWQsIGFjY2VwdF91cmwgKSB7XHJcbiAgICAgICAgaWYgKCBXQ19HYXRld2F5X1JlZXBheV9DaGVja291dC5wYXltZW50X3R5cGUgPT09ICdPVkVSTEFZJyApIHtcclxuICAgICAgICAgICAgLy8gU2hvdyBtb2RhbFxyXG4gICAgICAgICAgICB3aW5kb3cucnAuc2hvdyggcmVlcGF5X2lkICk7XHJcbiAgICAgICAgICAgIC8vcnAgPSBuZXcgUmVlcGF5Lk1vZGFsQ2hlY2tvdXQoIHJlZXBheV9pZCApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5ycCA9IG5ldyBSZWVwYXkuV2luZG93Q2hlY2tvdXQoIHJlZXBheV9pZCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LnJwLmFkZEV2ZW50SGFuZGxlciggUmVlcGF5LkV2ZW50LkFjY2VwdCwgZnVuY3Rpb24oIGRhdGEgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnQWNjZXB0JywgZGF0YSApO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlZGlyZWN0X3VybCA9IGFjY2VwdF91cmw7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBwcm9wIGluIGRhdGEgKSB7XHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmwgPSB3Y19yZWVwYXkuc2V0VXJsUGFyYW1ldGVyKCByZWRpcmVjdF91cmwsIHByb3AsIGRhdGFbcHJvcF0gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdF91cmw7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICB3aW5kb3cucnAuYWRkRXZlbnRIYW5kbGVyKCBSZWVwYXkuRXZlbnQuQ2FuY2VsLCBmdW5jdGlvbiggZGF0YSApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coICdDYW5jZWwnLCBkYXRhICk7XHJcbiAgICAgICAgICAgIHdjX3JlZXBheS50aHJvd19lcnJvciggV0NfR2F0ZXdheV9SZWVwYXlfQ2hlY2tvdXQuY2FuY2VsX3RleHQgKVxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgd2luZG93LnJwLmFkZEV2ZW50SGFuZGxlciggUmVlcGF5LkV2ZW50LkNsb3NlLCBmdW5jdGlvbiggZGF0YSApIHtcclxuICAgICAgICAgICAgdmFyIGZvcm0gPSAkKCdmb3JtLmNoZWNrb3V0Jyk7XHJcbiAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2xhc3MoICdwcm9jZXNzaW5nJyApLnVuYmxvY2soKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coICdDbG9zZScsIGRhdGEgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5ycC5hZGRFdmVudEhhbmRsZXIoIFJlZXBheS5FdmVudC5FcnJvciwgZnVuY3Rpb24oIGRhdGEgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRXJyb3InLCBkYXRhICk7XHJcbiAgICAgICAgICAgIHdjX3JlZXBheS50aHJvd19lcnJvciggV0NfR2F0ZXdheV9SZWVwYXlfQ2hlY2tvdXQuZXJyb3JfdGV4dCApXHJcbiAgICAgICAgfSApO1xyXG4gICAgfSxcclxuXHJcbiAgICB0aHJvd19lcnJvcjogZnVuY3Rpb24gKCBlcnJvclRocm93biApIHtcclxuICAgICAgICBqUXVlcnkoIGZ1bmN0aW9uKCAkICkge1xyXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQoJ2Zvcm0uY2hlY2tvdXQnKTtcclxuICAgICAgICAgICAgZm9ybS5yZW1vdmVDbGFzcyggJ3Byb2Nlc3NpbmcnICkudW5ibG9jaygpO1xyXG4gICAgICAgICAgICAkKCcud29vY29tbWVyY2UtTm90aWNlR3JvdXAnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnPGRpdiBjbGFzcz1cIndvb2NvbW1lcmNlLU5vdGljZUdyb3VwIHdvb2NvbW1lcmNlLU5vdGljZUdyb3VwLWNoZWNrb3V0XCI+PHVsIGNsYXNzPVwid29vY29tbWVyY2UtZXJyb3JcIiByb2xlPVwiYWxlcnRcIj48bGk+JyArIGVycm9yVGhyb3duICsgJzwvbGk+PC91bD48L2Rpdj4nO1xyXG4gICAgICAgICAgICBmb3JtLmJlZm9yZShtZXNzYWdlKTtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbEVsZW1lbnQgPSAkKCcud29vY29tbWVyY2UtTm90aWNlR3JvdXAtdXBkYXRlT3JkZXJSZXZpZXcsIC53b29jb21tZXJjZS1Ob3RpY2VHcm91cC1jaGVja291dCcpO1xyXG4gICAgICAgICAgICBpZiAoIXNjcm9sbEVsZW1lbnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxFbGVtZW50ID0gJCgnLmZvcm0uY2hlY2tvdXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsRWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IChzY3JvbGxFbGVtZW50Lm9mZnNldCgpLnRvcCAtIDEwMClcclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuXHJcbi8qKlxyXG4gICAgICogQWRkIHBhcmFtZXRlciBmb3IgVXJsXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVybFxyXG4gICAgICogQHBhcmFtIGtleVxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHNldFVybFBhcmFtZXRlcjogZnVuY3Rpb24gKCB1cmwsIGtleSwgdmFsdWUgKSB7XHJcbiAgICAgICAgdmFyIGJhc2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXSxcclxuICAgICAgICAgICAgdXJsUXVlcnlTdHJpbmcgPSAnPycgKyB1cmwuc3BsaXQoJz8nKVsxXSxcclxuICAgICAgICAgICAgbmV3UGFyYW0gPSBrZXkgKyAnPScgKyB2YWx1ZSxcclxuICAgICAgICAgICAgcGFyYW1zID0gJz8nICsgbmV3UGFyYW07XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBcInNlYXJjaFwiIHN0cmluZyBleGlzdHMsIHRoZW4gYnVpbGQgcGFyYW1zIGZyb20gaXRcclxuICAgICAgICBpZiAodXJsUXVlcnlTdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFtcXD8mXSknICsga2V5ICsgJ1teJl0qJyk7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVSZWdleCA9IG5ldyBSZWdFeHAoJyhbXFw/Jl0pJyArIGtleSArICc9W14mO10rWyY7XT8nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJykgeyAvLyBSZW1vdmUgcGFyYW0gaWYgdmFsdWUgaXMgZW1wdHlcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nLnJlcGxhY2UocmVtb3ZlUmVnZXgsIFwiJDFcIik7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBwYXJhbXMucmVwbGFjZSgvWyY7XSQvLCBcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXJsUXVlcnlTdHJpbmcubWF0Y2godXBkYXRlUmVnZXgpICE9PSBudWxsKSB7IC8vIElmIHBhcmFtIGV4aXN0cyBhbHJlYWR5LCB1cGRhdGUgaXRcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nLnJlcGxhY2UodXBkYXRlUmVnZXgsIFwiJDFcIiArIG5ld1BhcmFtKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIE90aGVyd2lzZSwgYWRkIGl0IHRvIGVuZCBvZiBxdWVyeSBzdHJpbmdcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nICsgJyYnICsgbmV3UGFyYW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vIHBhcmFtZXRlciB3YXMgc2V0IHNvIHdlIGRvbid0IG5lZWQgdGhlIHF1ZXN0aW9uIG1hcmtcclxuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgPT09ICc/JyA/ICcnIDogcGFyYW1zO1xyXG5cclxuICAgICAgICByZXR1cm4gYmFzZVVybCArIHBhcmFtcztcclxuICAgIH1cclxufTtcclxuXHJcbiJdfQ==
