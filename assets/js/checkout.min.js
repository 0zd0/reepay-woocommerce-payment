window.rp=new Reepay.ModalCheckout,jQuery(function(e){"use strict";if("undefined"==typeof wc_checkout_params)return!1;e(document).ajaxComplete(function(o,r,t){if(t.url===wc_checkout_params.checkout_url||t.url.indexOf("wc-ajax=complete_order")>-1){const o=r.responseText;try{const r=e.parseJSON(o);if(!r.hasOwnProperty("is_reepay_checkout"))return!1;wc_reepay.buildModalCheckout(r.reepay.id,r.accept_url)}catch(e){return!1}}}),e(document).ready(function(){if(window.location.hash.indexOf("#!reepay-pay")>-1){const e=document.location.hash.replace("#!reepay-pay",""),o=new URLSearchParams(e);let r=o.get("rid"),t=o.get("accept_url");window.setTimeout(function(){wc_reepay.buildModalCheckout(r,t),history.pushState("",document.title,window.location.pathname)},1e3)}})}),wc_reepay={buildModalCheckout:function(e,o){"OVERLAY"===WC_Gateway_Reepay_Checkout.payment_type?window.rp.show(e):window.rp=new Reepay.WindowCheckout(e),window.rp.addEventHandler(Reepay.Event.Accept,function(e){console.log("Accept",e);let r=o;for(let o in e)r=wc_reepay.setUrlParameter(r,o,e[o]);window.location.href=r}),window.rp.addEventHandler(Reepay.Event.Cancel,function(e){console.log("Cancel",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.cancel_text)}),window.rp.addEventHandler(Reepay.Event.Close,function(e){$("form.checkout").removeClass("processing").unblock(),console.log("Close",e)}),window.rp.addEventHandler(Reepay.Event.Error,function(e){console.log("Error",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.error_text)})},throw_error:function(e){jQuery(function(o){var r=o("form.checkout");r.removeClass("processing").unblock(),o(".woocommerce-NoticeGroup").remove();var t='<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"><ul class="woocommerce-error" role="alert"><li>'+e+"</li></ul></div>";r.before(t);var c=o(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");c.length||(c=o(".form.checkout")),c.length&&o("html, body").animate({scrollTop:c.offset().top-100},1e3)})},setUrlParameter:function(e,o,r){var t=e.split("?")[0],c="?"+e.split("?")[1],n=o+"="+r,a="?"+n;if(c){var l=new RegExp("([?&])"+o+"[^&]*"),u=new RegExp("([?&])"+o+"=[^&;]+[&;]?");a=null==r||""===r?(a=c.replace(u,"$1")).replace(/[&;]$/,""):null!==c.match(l)?c.replace(l,"$1"+n):c+"&"+n}return t+(a="?"===a?"":a)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrb3V0LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsInJwIiwiUmVlcGF5IiwiTW9kYWxDaGVja291dCIsImpRdWVyeSIsIiQiLCJ3Y19jaGVja291dF9wYXJhbXMiLCJkb2N1bWVudCIsImFqYXhDb21wbGV0ZSIsImV2ZW50IiwieGhyIiwic2V0dGluZ3MiLCJ1cmwiLCJjaGVja291dF91cmwiLCJpbmRleE9mIiwiZGF0YSIsInJlc3BvbnNlVGV4dCIsInJlc3VsdCIsInBhcnNlSlNPTiIsImhhc093blByb3BlcnR5Iiwid2NfcmVlcGF5IiwiYnVpbGRNb2RhbENoZWNrb3V0IiwicmVlcGF5IiwiaWQiLCJhY2NlcHRfdXJsIiwiZSIsInJlYWR5IiwibG9jYXRpb24iLCJoYXNoIiwicmVwbGFjZSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInJpZCIsImdldCIsInNldFRpbWVvdXQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwidGl0bGUiLCJwYXRobmFtZSIsInJlZXBheV9pZCIsIldDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0IiwicGF5bWVudF90eXBlIiwic2hvdyIsIldpbmRvd0NoZWNrb3V0IiwiYWRkRXZlbnRIYW5kbGVyIiwiRXZlbnQiLCJBY2NlcHQiLCJjb25zb2xlIiwibG9nIiwicmVkaXJlY3RfdXJsIiwicHJvcCIsInNldFVybFBhcmFtZXRlciIsImhyZWYiLCJDYW5jZWwiLCJ0aHJvd19lcnJvciIsImNhbmNlbF90ZXh0IiwiQ2xvc2UiLCJyZW1vdmVDbGFzcyIsInVuYmxvY2siLCJFcnJvciIsImVycm9yX3RleHQiLCJlcnJvclRocm93biIsImZvcm0iLCJyZW1vdmUiLCJtZXNzYWdlIiwiYmVmb3JlIiwic2Nyb2xsRWxlbWVudCIsImxlbmd0aCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJrZXkiLCJ2YWx1ZSIsImJhc2VVcmwiLCJzcGxpdCIsInVybFF1ZXJ5U3RyaW5nIiwibmV3UGFyYW0iLCJ1cGRh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QUFTLElBQU0rQyxFQUduQixHQUFJRCxFQUFnQixDQUNoQixJQUFJRSxFQUFjLElBQUlDLE9BQU8sU0FBWVAsRUFBTSxTQUMzQ1EsRUFBYyxJQUFJRCxPQUFPLFNBQVlQLEVBQU0sZ0JBSTNDMUMsRUFGQSxNQUFPMkMsR0FBcUQsS0FBVkEsR0FDbEQzQyxFQUFTOEMsRUFBZS9DLFFBQVFtRCxFQUFhLE9BQzdCbkQsUUFBUSxRQUFTLElBRVksT0FBdEMrQyxFQUFlSyxNQUFNSCxHQUNuQkYsRUFBZS9DLFFBQVFpRCxFQUFhLEtBQU9ELEdBRzNDRCxFQUFpQixJQUFNQyxFQU94QyxPQUFPSCxHQUZQNUMsRUFBb0IsTUFBWEEsRUFBaUIsR0FBS0EiLCJmaWxlIjoiY2hlY2tvdXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHdjX2NoZWNrb3V0X3BhcmFtcyAqL1xuLyogZ2xvYmFsIFJlZXBheSAqL1xuXG4vLyBQcmVsb2FkIE1vZGFsQ2hlY2tvdXRcbndpbmRvdy5ycCA9IG5ldyBSZWVwYXkuTW9kYWxDaGVja291dCgpO1xuXG5qUXVlcnkoIGZ1bmN0aW9uKCAkICkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHdjX2NoZWNrb3V0X3BhcmFtcyBpcyByZXF1aXJlZCB0byBjb250aW51ZSwgZW5zdXJlIHRoZSBvYmplY3QgZXhpc3RzXG4gICAgaWYgKCB0eXBlb2Ygd2NfY2hlY2tvdXRfcGFyYW1zID09PSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgICQoIGRvY3VtZW50ICkuYWpheENvbXBsZXRlKCBmdW5jdGlvbiAoIGV2ZW50LCB4aHIsIHNldHRpbmdzICkge1xuICAgICAgICBpZiAoICggc2V0dGluZ3MudXJsID09PSB3Y19jaGVja291dF9wYXJhbXMuY2hlY2tvdXRfdXJsICkgfHwgKCBzZXR0aW5ncy51cmwuaW5kZXhPZiggJ3djLWFqYXg9Y29tcGxldGVfb3JkZXInICkgPiAtMSApICkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAgICAgICAgIC8vIFBhcnNlXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9ICQucGFyc2VKU09OKCBkYXRhICk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpcyByZXNwb25zZSBmcm9tIHBheW1lbnQgZ2F0ZXdheVxuICAgICAgICAgICAgICAgIGlmICggISByZXN1bHQuaGFzT3duUHJvcGVydHkoICdpc19yZWVwYXlfY2hlY2tvdXQnICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3Y19yZWVwYXkuYnVpbGRNb2RhbENoZWNrb3V0KCByZXN1bHQucmVlcGF5LmlkLCByZXN1bHQuYWNjZXB0X3VybCApO1xuICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSApO1xuXG4gICAgJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICggd2luZG93LmxvY2F0aW9uLmhhc2guaW5kZXhPZiggJyMhcmVlcGF5LXBheScgKSA+IC0xICkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKCAnIyFyZWVwYXktcGF5JywnJyApLFxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoIHVybCApO1xuXG4gICAgICAgICAgICBsZXQgcmlkID0gcGFyYW1zLmdldCggJ3JpZCcgKSxcbiAgICAgICAgICAgICAgICBhY2NlcHRfdXJsID0gcGFyYW1zLmdldCggJ2FjY2VwdF91cmwnICk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgd2NfcmVlcGF5LmJ1aWxkTW9kYWxDaGVja291dCggcmlkLCBhY2NlcHRfdXJsICk7XG4gICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoICcnLCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICk7XG4gICAgICAgICAgICB9LCAxMDAwICk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG53Y19yZWVwYXkgPSB7XG4gICAgLyoqXG4gICAgICogQnVpbGQgTW9kYWwgQ2hlY2tvdXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWVwYXlfaWRcbiAgICAgKiBAcGFyYW0gYWNjZXB0X3VybFxuICAgICAqL1xuICAgIGJ1aWxkTW9kYWxDaGVja291dDogZnVuY3Rpb24gKCByZWVwYXlfaWQsIGFjY2VwdF91cmwgKSB7XG4gICAgICAgIGlmICggV0NfR2F0ZXdheV9SZWVwYXlfQ2hlY2tvdXQucGF5bWVudF90eXBlID09PSAnT1ZFUkxBWScgKSB7XG4gICAgICAgICAgICAvLyBTaG93IG1vZGFsXG4gICAgICAgICAgICB3aW5kb3cucnAuc2hvdyggcmVlcGF5X2lkICk7XG4gICAgICAgICAgICAvL3JwID0gbmV3IFJlZXBheS5Nb2RhbENoZWNrb3V0KCByZWVwYXlfaWQgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5ycCA9IG5ldyBSZWVwYXkuV2luZG93Q2hlY2tvdXQoIHJlZXBheV9pZCApO1xuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93LnJwLmFkZEV2ZW50SGFuZGxlciggUmVlcGF5LkV2ZW50LkFjY2VwdCwgZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ0FjY2VwdCcsIGRhdGEgKTtcblxuICAgICAgICAgICAgbGV0IHJlZGlyZWN0X3VybCA9IGFjY2VwdF91cmw7XG4gICAgICAgICAgICBmb3IgKCBsZXQgcHJvcCBpbiBkYXRhICkge1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0X3VybCA9IHdjX3JlZXBheS5zZXRVcmxQYXJhbWV0ZXIoIHJlZGlyZWN0X3VybCwgcHJvcCwgZGF0YVtwcm9wXSApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0X3VybDtcbiAgICAgICAgfSApO1xuXG4gICAgICAgIHdpbmRvdy5ycC5hZGRFdmVudEhhbmRsZXIoIFJlZXBheS5FdmVudC5DYW5jZWwsIGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdDYW5jZWwnLCBkYXRhICk7XG4gICAgICAgICAgICB3Y19yZWVwYXkudGhyb3dfZXJyb3IoIFdDX0dhdGV3YXlfUmVlcGF5X0NoZWNrb3V0LmNhbmNlbF90ZXh0IClcbiAgICAgICAgfSApO1xuXG4gICAgICAgIHdpbmRvdy5ycC5hZGRFdmVudEhhbmRsZXIoIFJlZXBheS5FdmVudC5DbG9zZSwgZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQoJ2Zvcm0uY2hlY2tvdXQnKTtcbiAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2xhc3MoICdwcm9jZXNzaW5nJyApLnVuYmxvY2soKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnQ2xvc2UnLCBkYXRhICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICB3aW5kb3cucnAuYWRkRXZlbnRIYW5kbGVyKCBSZWVwYXkuRXZlbnQuRXJyb3IsIGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFcnJvcicsIGRhdGEgKTtcbiAgICAgICAgICAgIHdjX3JlZXBheS50aHJvd19lcnJvciggV0NfR2F0ZXdheV9SZWVwYXlfQ2hlY2tvdXQuZXJyb3JfdGV4dCApXG4gICAgICAgIH0gKTtcbiAgICB9LFxuXG4gICAgdGhyb3dfZXJyb3I6IGZ1bmN0aW9uICggZXJyb3JUaHJvd24gKSB7XG4gICAgICAgIGpRdWVyeSggZnVuY3Rpb24oICQgKSB7XG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQoJ2Zvcm0uY2hlY2tvdXQnKTtcbiAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2xhc3MoICdwcm9jZXNzaW5nJyApLnVuYmxvY2soKTtcbiAgICAgICAgICAgICQoJy53b29jb21tZXJjZS1Ob3RpY2VHcm91cCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnPGRpdiBjbGFzcz1cIndvb2NvbW1lcmNlLU5vdGljZUdyb3VwIHdvb2NvbW1lcmNlLU5vdGljZUdyb3VwLWNoZWNrb3V0XCI+PHVsIGNsYXNzPVwid29vY29tbWVyY2UtZXJyb3JcIiByb2xlPVwiYWxlcnRcIj48bGk+JyArIGVycm9yVGhyb3duICsgJzwvbGk+PC91bD48L2Rpdj4nO1xuICAgICAgICAgICAgZm9ybS5iZWZvcmUobWVzc2FnZSk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlbWVudCA9ICQoJy53b29jb21tZXJjZS1Ob3RpY2VHcm91cC11cGRhdGVPcmRlclJldmlldywgLndvb2NvbW1lcmNlLU5vdGljZUdyb3VwLWNoZWNrb3V0Jyk7XG4gICAgICAgICAgICBpZiAoIXNjcm9sbEVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsRWxlbWVudCA9ICQoJy5mb3JtLmNoZWNrb3V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Nyb2xsRWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogKHNjcm9sbEVsZW1lbnQub2Zmc2V0KCkudG9wIC0gMTAwKVxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG5cbi8qKlxuICAgICAqIEFkZCBwYXJhbWV0ZXIgZm9yIFVybFxuICAgICAqXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0VXJsUGFyYW1ldGVyOiBmdW5jdGlvbiAoIHVybCwga2V5LCB2YWx1ZSApIHtcbiAgICAgICAgdmFyIGJhc2VVcmwgPSB1cmwuc3BsaXQoJz8nKVswXSxcbiAgICAgICAgICAgIHVybFF1ZXJ5U3RyaW5nID0gJz8nICsgdXJsLnNwbGl0KCc/JylbMV0sXG4gICAgICAgICAgICBuZXdQYXJhbSA9IGtleSArICc9JyArIHZhbHVlLFxuICAgICAgICAgICAgcGFyYW1zID0gJz8nICsgbmV3UGFyYW07XG5cbiAgICAgICAgLy8gSWYgdGhlIFwic2VhcmNoXCIgc3RyaW5nIGV4aXN0cywgdGhlbiBidWlsZCBwYXJhbXMgZnJvbSBpdFxuICAgICAgICBpZiAodXJsUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoJyhbXFw/Jl0pJyArIGtleSArICdbXiZdKicpO1xuICAgICAgICAgICAgdmFyIHJlbW92ZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFtcXD8mXSknICsga2V5ICsgJz1bXiY7XStbJjtdPycpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHsgLy8gUmVtb3ZlIHBhcmFtIGlmIHZhbHVlIGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gdXJsUXVlcnlTdHJpbmcucmVwbGFjZShyZW1vdmVSZWdleCwgXCIkMVwiKTtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBwYXJhbXMucmVwbGFjZSgvWyY7XSQvLCBcIlwiKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh1cmxRdWVyeVN0cmluZy5tYXRjaCh1cGRhdGVSZWdleCkgIT09IG51bGwpIHsgLy8gSWYgcGFyYW0gZXhpc3RzIGFscmVhZHksIHVwZGF0ZSBpdFxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nLnJlcGxhY2UodXBkYXRlUmVnZXgsIFwiJDFcIiArIG5ld1BhcmFtKTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gT3RoZXJ3aXNlLCBhZGQgaXQgdG8gZW5kIG9mIHF1ZXJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHVybFF1ZXJ5U3RyaW5nICsgJyYnICsgbmV3UGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBwYXJhbWV0ZXIgd2FzIHNldCBzbyB3ZSBkb24ndCBuZWVkIHRoZSBxdWVzdGlvbiBtYXJrXG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyA9PT0gJz8nID8gJycgOiBwYXJhbXM7XG5cbiAgICAgICAgcmV0dXJuIGJhc2VVcmwgKyBwYXJhbXM7XG4gICAgfVxufTtcblxuIl19
