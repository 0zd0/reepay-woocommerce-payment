if(wc&&wc.wcBlocksRegistry&&React&&wc_reepay){const e=new URL(document.currentScript.src).searchParams.get("name");if(!e)throw"Script "+document.currentScript.src+" - name is undefined";const{registerPaymentMethod:t}=wc.wcBlocksRegistry,{createElement:n,useEffect:s,useState:o}=React,{useSelect:a,useDispatch:c}=wp.data,{__:r}=wp.i18n,{getSetting:i}=wc.wcSettings,{PAYMENT_STORE_KEY:p}=wc.wcBlocksData,{decodeEntities:l}=wp.htmlEntities,u=i(e+"_data",{}),d=l(u.title)||r("Reepay checkout","reepay-checkout-gateway");u.tokens&&u.tokens.push({id:"new"});const m=n((()=>{const[e,t]=o(u.default_token),s=u.tokens.map((s=>n(y,{token:s,activeToken:e,setActiveToken:t})));return n("ul",{className:"reepay-blocks-list"},...s)})),y=({token:t,activeToken:s,setActiveToken:o})=>{console.log(s);const{paymentMethodData:i}=a((e=>({paymentMethodData:e(p).getPaymentMethodData()}))),{__internalSetPaymentMethodData:l}=c(p),u=t.image?n("img",{src:t.image,image_alt:t.label}):null,d=`wc-${e}-payment-token`,m=n("input",{type:"radio",name:d,id:`${d}-${t.id}`,value:t.id,checked:s===t.id,onChange:()=>{i[d]!==t.id&&(l({...i,[d]:parseInt(t.id)}),o(t.id))}}),y=n("label",{htmlFor:`wc-${e}-payment-token-${t.id}`},u,"new"===t.id?r("Use a new payment method","reepay-checkout-gateway"):`${t.masked} ${t.expiry_month}/${t.expiry_year}`);return n("li",{key:t.id,className:"reepay-blocks-list-item"},m,y)},k=n((e=>{const{eventRegistration:t,emitResponse:n}=e,{onPaymentProcessing:o,onCheckoutAfterProcessingWithSuccess:a,onCheckoutAfterProcessingWithError:c}=t;return s((()=>{const e=o((async e=>{console.log("onPaymentProcessing",e)})),t=a((async e=>{console.log("onCheckoutAfterProcessingWithSuccess",e);const{processingResponse:t}=e,{paymentDetails:n}=t;n.reepay_id&&n.accept_url&&wc_reepay.buildModalCheckout(n.reepay_id,n.accept_url)})),n=c((async e=>{console.log("onCheckoutAfterProcessingWithSuccess",e)}));return()=>{e(),t(),n()}}),[n.responseTypes.SUCCESS,n.responseTypes.ERROR,n.responseTypes.FAIL]),u.tokens?m:l(u.description||"")}),null),h=n((e=>{const{PaymentMethodLabel:t}=e.components;return n(t,{text:d})}),null);t({name:e,label:h,content:k,edit:k,savedTokenComponent:null,canMakePayment:()=>!0,ariaLabel:d,supports:{features:u.supports??[],showSavedCards:u.supports.includes("cards"),showSaveOption:u.supports.includes("cards")}})}
//# sourceMappingURL=woo-blocks.min.js.map
